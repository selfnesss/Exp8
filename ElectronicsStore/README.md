## Описание проекта

Проект включает:
- **schema.sql** — SQL-схема базы данных SQLite, определяющая таблицы `categories` (категории товаров) и `products` (продукты).
- **data/** — папка с CSV-файлами для загрузки примерных данных:
  - `categories.csv` — категории товаров (например, "Телевизоры", "Холодильники").
  - `products.csv` — продукты с полями: имя, бренд, модель, спецификация, цена, запас, рейтинг, категория, описание.
- **app.py** — основной файл Flask-приложения, предоставляющий веб-интерфейс для просмотра, поиска, фильтрации и сортировки продуктов.
- **requirements.txt** — список зависимостей Python.

Приложение автоматически инициализирует базу данных при первом запуске, загружая данные из CSV-файлов.

## Предпосылки

- **Python 3.8+** установлен на системе (проверьте командой `python --version`).
- **PowerShell** или командная строка Windows для выполнения команд.
- Доступ к интернету для установки зависимостей (если не установлены локально).

## Подробная инструкция по запуску

### Шаг 1: Клонирование или переход в директорию проекта
Перейдите в корневую папку проекта `Exp8`:
```
C:\Users\sejdz\OneDrive\Документы\GitHub\Exp8
```

### Шаг 2: Создание виртуального окружения
Виртуальное окружение изолирует зависимости проекта от системного Python. Создайте его в корне проекта:
```
python -m venv .venv
```
Это создаст папку `.venv` с изолированной средой Python.

### Шаг 3: Активация виртуального окружения
Активируйте окружение, чтобы использовать его Python и pip:
``` 0
.\.venv\Scripts\Activate.ps1
```
После активации в командной строке появится префикс `(.venv)`. Все дальнейшие команды будут выполняться в этом окружении.

### Шаг 4: Установка зависимостей
Установите необходимые пакеты из файла `requirements.txt`:
```
pip install -r ElectronicsStore/requirements.txt
```
Это установит Flask (версии 2.0+) и PyYAML. Процесс может занять несколько секунд.

### Шаг 5: Запуск приложения
Запустите Flask-приложение:
```
python ElectronicsStore/app.py
```
Приложение запустится в режиме отладки (debug=True), что позволяет видеть ошибки в консоли. Вы увидите вывод вроде:
```
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
```
База данных `electronics.db` будет автоматически создана и заполнена данными из CSV-файлов при первом запуске.

### Шаг 6: Доступ к приложению
Откройте браузер и перейдите по адресу: **http://127.0.0.1:5000/**

## Использование приложения

- **Главная страница**: Отображает таблицу всех продуктов с колонками: Изображение, Имя, Бренд, Модель/Спецификация, Цена, Запас, Рейтинг, Категория.
- **Поиск**: Введите текст в поле "Search" для поиска по имени, описанию или бренду продукта (регистронезависимый).
- **Фильтрация по категории**: Выберите категорию из выпадающего списка "Category" (например, "Телевизоры").
- **Сортировка**: Выберите критерий сортировки из "Sort": по имени, цене или рейтингу.
- **Применение фильтров**: Нажмите кнопку "Apply" для обновления результатов.
- **Добавление товара**: Нажмите "Add New Product" для перехода к форме добавления. Заполните поля и нажмите "Add Product".
- **Добавление клиента**: Нажмите "Add New Customer" для перехода к форме добавления клиента. Заполните поля и нажмите "Add Customer".
- **Просмотр клиентов**: "View Customers" — таблица клиентов с действиями Edit/Delete.
- **Добавление заказа**: "Add New Order" — выберите клиента и товары с количеством.
- **Просмотр заказов**: "View Orders" — таблица заказов.
- **Редактирование/Удаление**: В таблицах товаров и клиентов есть ссылки Edit/Delete.

Пример использования:
- Поиск "Samsung" покажет все продукты Samsung.
- Фильтр по категории "Холодильники" + сортировка по цене покажет холодильники, отсортированные по возрастанию цены.

## Структура базы данных

- **Таблица categories**:
  - `id` (INTEGER, PRIMARY KEY) — уникальный идентификатор.
  - `name` (TEXT) — название категории.

- **Таблица products**:
  - `id` (INTEGER, PRIMARY KEY) — уникальный идентификатор продукта.
  - `name` (TEXT) — название продукта.
  - `brand` (TEXT) — бренд.
  - `model` (TEXT) — модель.
  - `spec` (TEXT) — спецификация.
  - `price` (REAL) — цена.
  - `stock` (INTEGER) — количество на складе.
  - `rating` (REAL) — рейтинг.
  - `category_id` (INTEGER) — ссылка на категорию (FOREIGN KEY).
  - `description` (TEXT) — описание.
  - `image` (TEXT) — URL изображения продукта.

- **Таблица customers**:
  - `id` (INTEGER, PRIMARY KEY) — уникальный идентификатор клиента.
  - `first_name` (TEXT) — имя.
  - `last_name` (TEXT) — фамилия.
  - `phone` (TEXT) — телефон.
  - `email` (TEXT) — email.

- **Таблица orders**:
  - `id` (INTEGER, PRIMARY KEY) — уникальный идентификатор заказа.
  - `customer_id` (INTEGER) — ссылка на клиента (FOREIGN KEY).
  - `created_at` (TEXT) — дата создания.
  - `total` (REAL) — общая сумма.

- **Таблица order_items**:
  - `id` (INTEGER, PRIMARY KEY) — уникальный идентификатор элемента заказа.
  - `order_id` (INTEGER) — ссылка на заказ (FOREIGN KEY).
  - `product_id` (INTEGER) — ссылка на продукт (FOREIGN KEY).
  - `quantity` (INTEGER) — количество.
  - `price` (REAL) — цена на момент заказа.

## Остановка приложения
В терминале нажмите `Ctrl+C` для остановки сервера. Деактивируйте окружение командой `deactivate`, если нужно.

## Возможные проблемы и решения
- **Ошибка "python не найден"**: Убедитесь, что Python установлен и добавлен в PATH. Используйте полный путь, например `C:\Python39\python.exe`.
- **Порт занят**: Если 5000 порт занят, измените в `app.py` на другой, например `app.run(debug=True, port=5001)`.
- **База данных не создается**: Проверьте права на запись в папку проекта. Удалите `electronics.db`, если нужно пересоздать.
- **Зависимости не устанавливаются**: Проверьте интернет-соединение или установите пакеты вручную: `pip install Flask pyyaml`.

## Добавление в GitHub
Чтобы добавить проект в репозиторий:
1. Инициализируйте Git (если не): `git init`
2. Добавьте файлы: `git add .`
3. Зафиксируйте: `git commit -m "Добавлен прототип магазина бытовой техники"`
4. Отправьте: `git push origin main` (или ваша ветка).

Set-ExecutionPolicy -Scope CurrentUser RemoteSigned
и
.\.venv\Scripts\Activate.ps1
или
powershell -ExecutionPolicy Bypass -File .\.venv\Scripts\Activate.ps1
